<!--
SPDX-FileCopyrightText: 2017-present Tobias Kunze
SPDX-License-Identifier: AGPL-3.0-only WITH LicenseRef-Pretalx-AGPL-3.0-Terms
-->

{% extends "orga/base.html" %}

{% load event_tags %}
{% load i18n %}
{% load static %}

{% block scripts %}
    <script defer src="{% static "common/js/ui/dialog.js" %}"></script>
{% endblock scripts %}

{% block stylesheets %}
    <link rel="stylesheet" href="{% static "orga/css/ui/cfp.css" %}" />
{% endblock stylesheets %}

{% block extra_title %}{% translate "CfP Settings" %} :: {% endblock extra_title %}

{% block content %}
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>
            {% translate "CfP Settings" %}
            <span data-dialog-target="#info-dialog" data-toggle="dialog">
                <i class="fa fa-question-circle-o text-info"></i>
            </span>
        </h2>
        <a href="{{ request.event.cfp.urls.editor }}" class="btn btn-outline-info btn-sm">
            <i class="fa fa-edit"></i> {% translate "CfP Editor" %}
        </a>
    </div>
    <dialog class="info-dialog" id="info-dialog">
        <div class="alert alert-info">
            <span>
                {% translate "A good Call for Participation will engage potential speakers. Remember to include:" %}
                <br>
                <ul>
                    <li>{% translate "The formats (sessions, workshops, panels) and their durations" %}</li>
                    <li>{% translate "Topics you are looking for" %}</li>
                    <li>{% translate "How open you are to alternative topics" %}</li>
                    <li>{% translate "The people coming to your conference: interests, experience level â€¦" %}</li>
                    <li>{% translate "Link your Code of Conduct and Data Protection statements." %}</li>
                    <li>{% translate "Do you offer financial or other support, e.g. support for first time speakers?" %}</li>
                    <li>{% translate "Dates and location" %}</li>
                </ul>
            </span>
        </div>
    </dialog>
    <form method="post">
        {% csrf_token %}

        {% include "common/forms/errors.html" %}
        {% include "common/forms/errors.html" with form=sform %}

        {{ form.headline.as_field_group }}
        {{ form.text.as_field_group }}
        {{ form.opening.as_field_group }}
        {{ form.deadline.as_field_group }}
        {% if different_deadlines %}
            <div class="offset-md-3 alert alert-info">
                <div>
                    {% translate "Some of your session types have different deadlines:" %}
                    <ul class="mb-0">
                        {% for deadline, session_types in different_deadlines.items %}
                            <li>
                                {% for session_type in session_types %}
                                    <a href="{{ session_type.urls.base }}">{{ session_type.name }}</a>{% if not forloop.last %},{% else %}:{% endif %}
                                {% endfor %}
                                {{ deadline }}
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        {% endif %}
        {{ form.show_deadline.as_field_group }}
        {{ form.count_length_in.as_field_group }}
        {{ sform.use_tracks.as_field_group }}
        {{ sform.present_multiple_times.as_field_group }}
        {{ sform.speakers_can_edit_submissions.as_field_group }}
        {{ sform.submission_public_review.as_field_group }}
        {{ sform.mail_on_new_submission.as_field_group }}

        {% include "orga/includes/submit_row.html" %}
    </form>
{% endblock content %}
